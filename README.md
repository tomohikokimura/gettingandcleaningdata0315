# An R script to generate a tidy data set

## Overview
This repository contains an R script, `run_analysis.R`, that generates a tidy
data set, `meansPerSubjectActivity`, from the *Human Activity Recognition
Using Smartphones* data, which satisfies the following characteristics:

1. Consists of both training and test data that are merged.
2. Includes only the measurements on the mean and standard deviation
   for each measurement.
3. For each of the measurements selected above, summarises it by taking a mean
   per each subject and activity.
4. All the selected features have descriptive column names taken from
   *features.txt*

This script assumes that the data set is located in the working directory with
the following directory structure:

```
./UCI HAR Dataset/activity_labels.txt        (activity id/label table)
                 /features.txt               (feature id/label table)
                 /train/                     (training data directory)
                        X_train.tx           (observations)
                        subject_train.txt    (subjects)
                        y_train.txt          (activities)
                 /test/                      (test data directory)
                       X_test.txt            (observations)
                       subject_test.txt      (subjects)
                       y_test.txt            (activities)
```

The original data set can be downloaded from [the UCI site](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones).

## Functions
The script contains the following functions:
* `testFile`, `trainFile`: Utilities to generate a file path from a file name.
* `extractMeanAndStd`: Extracts only the measuraments on mean and standard
                       deviation from the give data frame consisting of 561
                       features. Each feature is labled in the file,
                       *UCI HAR Dataset/features.txt*.
* `activityLabelsVector`: Reads in subject ID vector from a file that
                          corresponds to the training / test data, joins
                          with the activity ID/label table, and keeps only the
                          labels.
* `subjectIdsVector`: Reads in a subject ID vector from an input file and
                      assigns a descriptive column name.
* `meansAndStds`: A main function that joins each feature vector with the
                  corresponding subject ID and activity label, keeping only the
                  means and standard deviations of measurements with
                  descriptive feature names.

## Tidy data generation process
The original data were processed in the following way to produce the final tidy
data set.

1. For each of the training and test data sets, do the following
   (`meansAndStds`),
  1. Read the feature vectors.
  2. Set the column name to descriptive labels taken from *features.txt*.
  3. Keeps only the means and STDs, reducing the feature size.
  4. Generates a subject ID vector.
  5. Generates an activity label vector.
  6. Binds the subject ID vector, the activity label vector, and the subsetted
     feature vectors into a singe data frame by `cbind`.
2. Merge the training and test data sets into a single data frame by `rbind`.
3. Group the entire data set generated by the above step 2. by subject and
   activity by calling `group_by`.
4. Summarise each measurement by taking the mean by calling `summarise_each`.

**Note**: In the above the means and standard deviations are extracted from
the feature vectors first to reduce the data size before merging the
training and test data sets.
